<!doctype html>
<html lang="en" class="h-100">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ExamGuardian Pro - Ultra Premium Security Dashboard</title>

        <!-- Enhanced Meta Tags -->
        <meta
            name="description"
            content="Advanced AI-powered exam security monitoring with real-time threat detection"
        />
        <meta name="theme-color" content="#667eea" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta
            name="apple-mobile-web-app-status-bar-style"
            content="black-translucent"
        />

        <!-- Premium Favicon -->
        <link
            rel="icon"
            type="image/svg+xml"
            href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='grad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' style='stop-color:%23667eea'/><stop offset='100%' style='stop-color:%23764ba2'/></linearGradient></defs><rect width='100' height='100' fill='url(%23grad)' rx='20'/><text x='50' y='65' font-size='45' text-anchor='middle' fill='white'>üõ°Ô∏è</text></svg>"
        />

        <!-- Preconnect for Performance -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://cdn.jsdelivr.net" />
        <link rel="dns-prefetch" href="//unpkg.com" />
        <link rel="dns-prefetch" href="//cdnjs.cloudflare.com" />

        <!-- Premium Typography -->
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&family=JetBrains+Mono:wght@100;200;300;400;500;600;700;800&display=swap"
            rel="stylesheet"
        />

        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous"
        />

        <!-- Bootstrap Icons -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
            rel="stylesheet"
        />

        <!-- Chart.js for Advanced Visualizations -->
        <script
            src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"
            integrity="sha384-6+aNKuaw3cNLmcGnBJYLvpJbQ0vY5p+T1qJ9Q0vQ7i9/JgCYVm9JF9yN1IbE0L6"
            crossorigin="anonymous"
        ></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

        <!-- AOS (Animate On Scroll) -->
        <link
            href="https://unpkg.com/aos@2.3.1/dist/aos.css"
            rel="stylesheet"
        />
        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

        <!-- Socket.IO -->
        <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
        <!-- Fallback CDN -->
        <script>
            if (typeof io === "undefined") {
                document.write(
                    '<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.min.js"><\/script>',
                );
            }
        </script>

        <!-- Custom Premium Styles -->
        <link
            rel="stylesheet"
            href="{{ url_for('static', filename='css/dashboard.css') }}"
        />

        <!-- Additional Premium Features -->
        <style>
            /* Loading Screen */
            .loading-screen {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: var(--gradient-cosmic);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 9999;
                transition: opacity 0.5s ease-out;
            }

            .loading-screen.fade-out {
                opacity: 0;
                pointer-events: none;
            }

            .loading-content {
                text-align: center;
                color: white;
            }

            .loading-logo {
                width: 100px;
                height: 100px;
                margin: 0 auto 2rem;
                background: var(--glass-bg-strong);
                border: 2px solid var(--glass-border-strong);
                border-radius: var(--radius-2xl);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 3rem;
                animation: loadingPulse 2s infinite;
                backdrop-filter: blur(20px);
                box-shadow: var(--shadow-glass-strong);
            }

            @keyframes loadingPulse {
                0%,
                100% {
                    transform: scale(1);
                    box-shadow: var(--shadow-glass-strong);
                }
                50% {
                    transform: scale(1.05);
                    box-shadow: var(--shadow-neon);
                }
            }

            .loading-text {
                font-size: 1.5rem;
                font-weight: 600;
                margin-bottom: 1rem;
                background: linear-gradient(
                    45deg,
                    var(--primary-light),
                    var(--accent)
                );
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .loading-subtext {
                opacity: 0.8;
                margin-bottom: 2rem;
            }

            /* Enhanced Connection Status */
            .connection-pulse {
                animation: connectionPulse 2s infinite;
            }

            @keyframes connectionPulse {
                0%,
                100% {
                    opacity: 1;
                    transform: scale(1);
                }
                50% {
                    opacity: 0.7;
                    transform: scale(0.95);
                }
            }

            /* Staggered Animations */
            .stagger-item {
                opacity: 0;
                transform: translateY(30px);
                animation: staggerIn 0.6s ease-out forwards;
            }

            .stagger-item:nth-child(1) {
                animation-delay: 0.1s;
            }
            .stagger-item:nth-child(2) {
                animation-delay: 0.2s;
            }
            .stagger-item:nth-child(3) {
                animation-delay: 0.3s;
            }
            .stagger-item:nth-child(4) {
                animation-delay: 0.4s;
            }

            @keyframes staggerIn {
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* Micro-interactions */
            .micro-interaction {
                transition: var(--transition-elastic);
                cursor: pointer;
            }

            .micro-interaction:hover {
                transform: translateY(-2px);
            }

            .micro-interaction:active {
                transform: translateY(0) scale(0.98);
            }
        </style>
    </head>

    <body class="d-flex flex-column h-100">
        <!-- Premium Loading Screen -->
        <div class="loading-screen" id="loading-screen">
            <div class="loading-content" data-aos="zoom-in">
                <div class="loading-logo">üõ°Ô∏è</div>
                <div class="loading-text">ExamGuardian Pro</div>
                <div class="loading-subtext">
                    Initializing advanced security protocols...
                </div>
                <div class="loading-spinner"></div>
            </div>
        </div>

        <!-- Ultra Premium Navigation -->
        <nav
            class="navbar navbar-expand-lg premium-navbar position-fixed w-100"
            style="z-index: var(--z-fixed)"
        >
            <div class="container-fluid px-4">
                <a
                    class="navbar-brand d-flex align-items-center micro-interaction"
                    href="#"
                    data-aos="fade-right"
                >
                    <div
                        class="me-3 p-3 rounded-circle"
                        style="
                            background: var(--gradient-primary);
                            box-shadow: var(--shadow-neon);
                        "
                    >
                        <i class="bi bi-shield-check fs-4 text-white"></i>
                    </div>
                    <div>
                        <div class="h4 mb-0 text-gradient fw-extrabold">
                            ExamGuardian Pro
                        </div>
                        <small class="text-white-50 fw-medium"
                            >Ultra Premium Security</small
                        >
                    </div>
                </a>

                <div
                    class="d-flex align-items-center gap-3"
                    data-aos="fade-left"
                >
                    <!-- Enhanced Connection Status -->
                    <div
                        class="d-flex align-items-center glass-card px-3 py-2 rounded-pill"
                    >
                        <div
                            class="connection-indicator me-2"
                            id="connection-indicator"
                        >
                            <div
                                class="status-indicator status-running connection-pulse"
                                id="status-dot"
                            ></div>
                        </div>
                        <span
                            class="badge-premium"
                            id="connection-status"
                            style="background: none; border: none; padding: 0"
                        >
                            <span class="fw-medium text-white"
                                >Initializing...</span
                            >
                        </span>
                    </div>

                    <!-- Enhanced System Metrics -->
                    <div
                        class="d-none d-lg-flex align-items-center glass-card px-3 py-2 rounded-pill"
                    >
                        <div
                            class="d-flex align-items-center text-white-50 small me-3"
                        >
                            <i class="bi bi-cpu me-1 text-info"></i>
                            <span id="nav-cpu" class="text-white fw-medium"
                                >--</span
                            >
                        </div>
                        <div
                            class="d-flex align-items-center text-white-50 small"
                        >
                            <i class="bi bi-memory me-1 text-warning"></i>
                            <span id="nav-memory" class="text-white fw-medium"
                                >--</span
                            >
                        </div>
                    </div>

                    <!-- Enhanced Demo Mode -->
                    <button
                        class="btn btn-premium"
                        id="demo-mode-btn"
                        onclick="toggleDemoMode()"
                    >
                        <i class="bi bi-flask me-2"></i>
                        <span>Demo</span>
                    </button>

                    <!-- Settings Modal Trigger -->
                    <button
                        class="btn btn-premium"
                        data-bs-toggle="modal"
                        data-bs-target="#settingsModal"
                    >
                        <i class="bi bi-gear me-2"></i>
                        <span class="d-none d-sm-inline">Settings</span>
                    </button>

                    <!-- Ultra Emergency Button -->
                    <button
                        class="btn btn-emergency btn-lg px-4 py-2 fw-bold position-relative micro-interaction"
                        id="close-all-btn"
                        disabled
                    >
                        <i class="bi bi-shield-x me-2"></i>
                        <span>SECURE EXAM</span>
                        <div
                            class="position-absolute top-0 start-100 translate-middle"
                        >
                            <span
                                class="badge badge-ai-threat fw-bold"
                                id="threat-counter"
                                >0</span
                            >
                        </div>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content Container -->
        <main class="flex-grow-1" style="padding-top: 120px">
            <div class="container-fluid px-4">
                <!-- Dynamic Alert System -->
                <div
                    id="alert-container"
                    class="position-fixed"
                    style="
                        top: 140px;
                        right: 20px;
                        z-index: var(--z-toast);
                        max-width: 400px;
                    "
                ></div>

                <!-- Hero Statistics Dashboard -->
                <section
                    class="mb-5"
                    data-aos="fade-up"
                    data-aos-duration="800"
                >
                    <div class="row g-4">
                        <!-- System Processes Card -->
                        <div class="col-xl-3 col-lg-6 col-md-6">
                            <div
                                class="hero-stat-card glass-card-strong h-100 float-animation stagger-item"
                            >
                                <div class="card-body p-4">
                                    <div
                                        class="d-flex justify-content-between align-items-start"
                                    >
                                        <div class="flex-grow-1">
                                            <p
                                                class="text-white-50 mb-2 fw-medium small text-uppercase letter-spacing-1"
                                            >
                                                System Processes
                                            </p>
                                            <h2
                                                class="counter mb-2"
                                                id="total-processes"
                                                style="color: var(--info)"
                                            >
                                                --
                                            </h2>
                                            <small
                                                class="text-white-50"
                                                id="process-change"
                                            >
                                                <i
                                                    class="bi bi-arrow-up-circle me-1"
                                                ></i
                                                >Scanning...
                                            </small>
                                        </div>
                                        <div class="card-icon text-info">
                                            <i class="bi bi-cpu-fill"></i>
                                        </div>
                                    </div>
                                    <div
                                        class="progress progress-premium mt-3"
                                        style="height: 6px"
                                    >
                                        <div
                                            class="progress-bar"
                                            id="process-progress"
                                            style="
                                                width: 0%;
                                                background: var(
                                                    --gradient-info
                                                );
                                            "
                                        ></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- AI Threats Card -->
                        <div class="col-xl-3 col-lg-6 col-md-6">
                            <div
                                class="hero-stat-card glass-card-strong h-100 float-animation stagger-item"
                                id="ai-threat-card"
                            >
                                <div class="card-body p-4">
                                    <div
                                        class="d-flex justify-content-between align-items-start"
                                    >
                                        <div class="flex-grow-1">
                                            <p
                                                class="text-white-50 mb-2 fw-medium small text-uppercase letter-spacing-1"
                                            >
                                                AI Threats Detected
                                            </p>
                                            <h2
                                                class="counter mb-2"
                                                id="ai-processes"
                                                style="color: var(--danger)"
                                            >
                                                --
                                            </h2>
                                            <small
                                                class="text-white-50"
                                                id="ai-status"
                                            >
                                                <i
                                                    class="bi bi-shield-exclamation me-1"
                                                ></i
                                                >Analyzing...
                                            </small>
                                        </div>
                                        <div class="card-icon text-danger">
                                            <i class="bi bi-robot"></i>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <button
                                            class="btn btn-danger btn-sm rounded-pill w-100 micro-interaction"
                                            id="kill-ai-quick"
                                        >
                                            <i class="bi bi-x-octagon me-2"></i
                                            >Terminate Threats
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Browser Sessions Card -->
                        <div class="col-xl-3 col-lg-6 col-md-6">
                            <div
                                class="hero-stat-card glass-card-strong h-100 float-animation stagger-item"
                            >
                                <div class="card-body p-4">
                                    <div
                                        class="d-flex justify-content-between align-items-start"
                                    >
                                        <div class="flex-grow-1">
                                            <p
                                                class="text-white-50 mb-2 fw-medium small text-uppercase letter-spacing-1"
                                            >
                                                Browser Sessions
                                            </p>
                                            <h2
                                                class="counter mb-2"
                                                id="browser-tabs"
                                                style="color: var(--warning)"
                                            >
                                                --
                                            </h2>
                                            <small
                                                class="text-white-50"
                                                id="tab-status"
                                            >
                                                <i
                                                    class="bi bi-window-stack me-1"
                                                ></i
                                                >Monitoring...
                                            </small>
                                        </div>
                                        <div class="card-icon text-warning">
                                            <i class="bi bi-window-stack"></i>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <button
                                            class="btn btn-warning btn-sm rounded-pill w-100 micro-interaction"
                                            id="close-tabs-quick"
                                        >
                                            <i class="bi bi-x-square me-2"></i
                                            >Close Sessions
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- System Health Card -->
                        <div class="col-xl-3 col-lg-6 col-md-6">
                            <div
                                class="hero-stat-card glass-card-strong h-100 float-animation stagger-item"
                            >
                                <div class="card-body p-4">
                                    <div
                                        class="d-flex justify-content-between align-items-start"
                                    >
                                        <div class="flex-grow-1">
                                            <p
                                                class="text-white-50 mb-2 fw-medium small text-uppercase letter-spacing-1"
                                            >
                                                System Health
                                            </p>
                                            <h2
                                                class="counter mb-2"
                                                id="memory-usage"
                                                style="color: var(--success)"
                                            >
                                                --
                                            </h2>
                                            <small
                                                class="text-white-50"
                                                id="health-status"
                                            >
                                                <i
                                                    class="bi bi-heart-pulse me-1"
                                                ></i
                                                >Optimal
                                            </small>
                                        </div>
                                        <div style="width: 60px; height: 60px">
                                            <canvas
                                                id="health-chart"
                                                width="60"
                                                height="60"
                                            ></canvas>
                                        </div>
                                    </div>
                                    <div class="row mt-3 text-center">
                                        <div class="col-6">
                                            <small class="text-white-50 d-block"
                                                >CPU</small
                                            >
                                            <strong
                                                class="text-success"
                                                id="cpu-percentage"
                                                >--%</strong
                                            >
                                        </div>
                                        <div class="col-6">
                                            <small class="text-white-50 d-block"
                                                >RAM</small
                                            >
                                            <strong
                                                class="text-success"
                                                id="ram-percentage"
                                                >--%</strong
                                            >
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Main Dashboard Grid -->
                <div class="row g-4">
                    <!-- Advanced Process Monitor -->
                    <div
                        class="col-lg-8"
                        data-aos="fade-right"
                        data-aos-duration="800"
                    >
                        <div class="glass-card glass-card-strong h-100">
                            <div
                                class="card-header bg-transparent border-0 p-4"
                            >
                                <div
                                    class="d-flex justify-content-between align-items-center flex-wrap gap-3"
                                >
                                    <div>
                                        <h4 class="text-white fw-bold mb-1">
                                            <i
                                                class="bi bi-activity text-info me-2"
                                            ></i>
                                            Live Process Monitor
                                        </h4>
                                        <p class="text-white-50 mb-0">
                                            Real-time application surveillance
                                            with AI threat detection
                                        </p>
                                    </div>
                                    <div class="btn-group" role="group">
                                        <button
                                            class="btn btn-premium btn-sm micro-interaction"
                                            id="refresh-processes-btn"
                                            data-bs-toggle="tooltip"
                                            data-bs-title="Refresh Process List"
                                        >
                                            <i
                                                class="bi bi-arrow-clockwise"
                                            ></i>
                                        </button>
                                        <button
                                            class="btn btn-outline-danger btn-sm micro-interaction"
                                            id="kill-ai-btn"
                                            data-bs-toggle="tooltip"
                                            data-bs-title="Terminate AI Applications"
                                        >
                                            <i class="bi bi-robot"></i>
                                        </button>
                                        <div class="dropdown">
                                            <button
                                                class="btn btn-premium btn-sm dropdown-toggle micro-interaction"
                                                data-bs-toggle="dropdown"
                                                data-bs-auto-close="outside"
                                            >
                                                <i
                                                    class="bi bi-three-dots-vertical"
                                                ></i>
                                            </button>
                                            <ul
                                                class="dropdown-menu dropdown-menu-dark glass-card border-0"
                                            >
                                                <li>
                                                    <h6
                                                        class="dropdown-header text-white-50"
                                                    >
                                                        Sort Options
                                                    </h6>
                                                </li>
                                                <li>
                                                    <a
                                                        class="dropdown-item"
                                                        href="#"
                                                        id="sort-by-memory"
                                                    >
                                                        <i
                                                            class="bi bi-sort-numeric-down me-2"
                                                        ></i
                                                        >By Memory Usage</a
                                                    >
                                                </li>
                                                <li>
                                                    <a
                                                        class="dropdown-item"
                                                        href="#"
                                                        id="sort-by-cpu"
                                                    >
                                                        <i
                                                            class="bi bi-speedometer me-2"
                                                        ></i
                                                        >By CPU Usage</a
                                                    >
                                                </li>
                                                <li>
                                                    <a
                                                        class="dropdown-item"
                                                        href="#"
                                                        id="sort-by-name"
                                                    >
                                                        <i
                                                            class="bi bi-sort-alpha-down me-2"
                                                        ></i
                                                        >By Name</a
                                                    >
                                                </li>
                                                <li>
                                                    <hr
                                                        class="dropdown-divider"
                                                    />
                                                </li>
                                                <li>
                                                    <h6
                                                        class="dropdown-header text-white-50"
                                                    >
                                                        Filter Options
                                                    </h6>
                                                </li>
                                                <li>
                                                    <a
                                                        class="dropdown-item"
                                                        href="#"
                                                        id="filter-ai-only"
                                                    >
                                                        <i
                                                            class="bi bi-robot me-2"
                                                        ></i
                                                        >AI Apps Only</a
                                                    >
                                                </li>
                                                <li>
                                                    <a
                                                        class="dropdown-item"
                                                        href="#"
                                                        id="filter-high-memory"
                                                    >
                                                        <i
                                                            class="bi bi-memory me-2"
                                                        ></i
                                                        >High Memory</a
                                                    >
                                                </li>
                                                <li>
                                                    <hr
                                                        class="dropdown-divider"
                                                    />
                                                </li>
                                                <li>
                                                    <a
                                                        class="dropdown-item"
                                                        href="#"
                                                        id="export-list"
                                                    >
                                                        <i
                                                            class="bi bi-download me-2"
                                                        ></i
                                                        >Export List</a
                                                    >
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card-body p-0">
                                <!-- Enhanced Search and Filter Bar -->
                                <div
                                    class="px-4 py-3 border-bottom border-white-10"
                                >
                                    <div class="row g-3 align-items-center">
                                        <div class="col-md-6">
                                            <div class="position-relative">
                                                <i
                                                    class="bi bi-search position-absolute top-50 start-0 translate-middle-y text-white-50 ms-3"
                                                ></i>
                                                <input
                                                    type="text"
                                                    class="form-control ps-5"
                                                    placeholder="Search processes by name, PID, or path..."
                                                    id="process-search"
                                                />
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div
                                                class="d-flex align-items-center gap-3 text-white-50 small"
                                            >
                                                <div
                                                    class="d-flex align-items-center"
                                                >
                                                    <span
                                                        class="status-indicator status-running me-1"
                                                    ></span>
                                                    <span
                                                        class="fw-medium"
                                                        id="running-count"
                                                        >0</span
                                                    >
                                                    <span class="ms-1"
                                                        >Running</span
                                                    >
                                                </div>
                                                <div
                                                    class="d-flex align-items-center"
                                                >
                                                    <span
                                                        class="badge badge-ai-threat me-1"
                                                    ></span>
                                                    <span
                                                        class="fw-medium"
                                                        id="ai-count-badge"
                                                        >0</span
                                                    >
                                                    <span class="ms-1"
                                                        >Threats</span
                                                    >
                                                </div>
                                                <div
                                                    class="d-flex align-items-center"
                                                >
                                                    <span
                                                        class="badge badge-high-memory me-1"
                                                    ></span>
                                                    <span
                                                        class="fw-medium"
                                                        id="memory-count-badge"
                                                        >0</span
                                                    >
                                                    <span class="ms-1"
                                                        >High Mem</span
                                                    >
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Enhanced Process Table -->
                                <div class="process-table-container">
                                    <div
                                        class="table-responsive"
                                        style="max-height: 500px"
                                    >
                                        <table
                                            class="table table-hover table-premium mb-0"
                                        >
                                            <thead class="sticky-top">
                                                <tr>
                                                    <th
                                                        scope="col"
                                                        class="micro-interaction"
                                                        data-sort="name"
                                                    >
                                                        <i
                                                            class="bi bi-app me-1"
                                                        ></i
                                                        >Process
                                                        <i
                                                            class="bi bi-arrow-down-up text-white-50 ms-1 small"
                                                        ></i>
                                                    </th>
                                                    <th
                                                        scope="col"
                                                        class="micro-interaction"
                                                        data-sort="cpu"
                                                    >
                                                        <i
                                                            class="bi bi-speedometer me-1"
                                                        ></i
                                                        >CPU
                                                        <i
                                                            class="bi bi-arrow-down-up text-white-50 ms-1 small"
                                                        ></i>
                                                    </th>
                                                    <th
                                                        scope="col"
                                                        class="micro-interaction"
                                                        data-sort="memory"
                                                    >
                                                        <i
                                                            class="bi bi-memory me-1"
                                                        ></i
                                                        >Memory
                                                        <i
                                                            class="bi bi-arrow-down-up text-white-50 ms-1 small"
                                                        ></i>
                                                    </th>
                                                    <th
                                                        scope="col"
                                                        class="micro-interaction"
                                                        data-sort="status"
                                                    >
                                                        <i
                                                            class="bi bi-shield-check me-1"
                                                        ></i
                                                        >Status
                                                        <i
                                                            class="bi bi-arrow-down-up text-white-50 ms-1 small"
                                                        ></i>
                                                    </th>
                                                    <th scope="col">
                                                        <i
                                                            class="bi bi-three-dots me-1"
                                                        ></i
                                                        >Actions
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody id="processes-table">
                                                <!-- Dynamic content will be populated here -->
                                                <tr>
                                                    <td
                                                        colspan="5"
                                                        class="text-center py-5"
                                                    >
                                                        <div
                                                            class="loading-spinner mx-auto mb-3"
                                                        ></div>
                                                        <p
                                                            class="text-white-50 mb-0"
                                                        >
                                                            Loading process
                                                            data...
                                                        </p>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Sidebar -->
                    <div
                        class="col-lg-4"
                        data-aos="fade-left"
                        data-aos-duration="800"
                    >
                        <div class="row g-4">
                            <!-- Browser Tabs Monitor -->
                            <div class="col-12">
                                <div class="glass-card glass-card-strong h-100">
                                    <div
                                        class="card-header bg-transparent border-0 p-4"
                                    >
                                        <div
                                            class="d-flex justify-content-between align-items-center"
                                        >
                                            <div>
                                                <h4
                                                    class="text-white fw-bold mb-1"
                                                >
                                                    <i
                                                        class="bi bi-window-stack text-warning me-2"
                                                    ></i>
                                                    Browser Sessions
                                                </h4>
                                                <p
                                                    class="text-white-50 mb-0 small"
                                                >
                                                    Active tab monitoring
                                                </p>
                                            </div>
                                            <button
                                                class="btn btn-premium btn-sm micro-interaction"
                                                id="refresh-tabs-btn"
                                                data-bs-toggle="tooltip"
                                                data-bs-title="Refresh Tab List"
                                            >
                                                <i
                                                    class="bi bi-arrow-clockwise"
                                                ></i>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="card-body p-0">
                                        <!-- Browser Stats -->
                                        <div
                                            class="px-4 py-3 border-bottom border-white-10"
                                        >
                                            <div class="row g-3">
                                                <div class="col-4 text-center">
                                                    <div
                                                        class="d-flex align-items-center justify-content-center mb-2"
                                                    >
                                                        <i
                                                            class="bi bi-browser-chrome text-info me-2"
                                                        ></i>
                                                        <span
                                                            class="counter text-white"
                                                            id="chrome-count"
                                                            >0</span
                                                        >
                                                    </div>
                                                    <small class="text-white-50"
                                                        >Chrome</small
                                                    >
                                                </div>
                                                <div class="col-4 text-center">
                                                    <div
                                                        class="d-flex align-items-center justify-content-center mb-2"
                                                    >
                                                        <i
                                                            class="bi bi-browser-firefox text-warning me-2"
                                                        ></i>
                                                        <span
                                                            class="counter text-white"
                                                            id="firefox-count"
                                                            >0</span
                                                        >
                                                    </div>
                                                    <small class="text-white-50"
                                                        >Firefox</small
                                                    >
                                                </div>
                                                <div class="col-4 text-center">
                                                    <div
                                                        class="d-flex align-items-center justify-content-center mb-2"
                                                    >
                                                        <i
                                                            class="bi bi-browser-edge text-primary me-2"
                                                        ></i>
                                                        <span
                                                            class="counter text-white"
                                                            id="edge-count"
                                                            >0</span
                                                        >
                                                    </div>
                                                    <small class="text-white-50"
                                                        >Edge</small
                                                    >
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Enhanced Tab Lists -->
                                        <div
                                            class="accordion accordion-premium"
                                            id="browserAccordion"
                                        >
                                            <div class="accordion-item">
                                                <h2 class="accordion-header">
                                                    <button
                                                        class="accordion-button collapsed"
                                                        type="button"
                                                        data-bs-toggle="collapse"
                                                        data-bs-target="#chromeCollapse"
                                                    >
                                                        <div
                                                            class="d-flex align-items-center w-100"
                                                        >
                                                            <i
                                                                class="bi bi-browser-chrome text-info me-2"
                                                            ></i>
                                                            <div
                                                                class="flex-grow-1"
                                                            >
                                                                <div
                                                                    class="fw-semibold"
                                                                >
                                                                    Google
                                                                    Chrome
                                                                </div>
                                                                <small
                                                                    class="text-white-50"
                                                                >
                                                                    <span
                                                                        id="chrome-tab-count"
                                                                        >0</span
                                                                    >
                                                                    tabs active
                                                                </small>
                                                            </div>
                                                            <span
                                                                class="badge badge-premium ms-2"
                                                                id="chrome-status"
                                                                >Safe</span
                                                            >
                                                        </div>
                                                    </button>
                                                </h2>
                                                <div
                                                    id="chromeCollapse"
                                                    class="accordion-collapse collapse"
                                                    data-bs-parent="#browserAccordion"
                                                >
                                                    <div
                                                        class="accordion-body p-0"
                                                    >
                                                        <div
                                                            class="list-group list-group-flush"
                                                            id="chrome-tab-list"
                                                        >
                                                            <div
                                                                class="list-group-item text-center py-4"
                                                            >
                                                                <i
                                                                    class="bi bi-browser-chrome text-white-50 fs-1 mb-2 d-block"
                                                                ></i>
                                                                <p
                                                                    class="text-white-50 mb-0"
                                                                >
                                                                    No Chrome
                                                                    tabs
                                                                    detected
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Activity Log Section -->
                    <div class="col-12 mt-4">
                        <div class="glass-card glass-card-strong">
                            <div
                                class="card-header bg-transparent border-0 p-4"
                            >
                                <div
                                    class="d-flex justify-content-between align-items-center flex-wrap gap-3"
                                >
                                    <div>
                                        <h4 class="text-white fw-bold mb-1">
                                            <i
                                                class="bi bi-journal-text text-success me-2"
                                            ></i>
                                            Security Activity Log
                                        </h4>
                                        <p class="text-white-50 mb-0">
                                            Real-time monitoring and audit trail
                                        </p>
                                    </div>
                                    <div
                                        class="d-flex align-items-center gap-2"
                                    >
                                        <div class="form-check form-switch">
                                            <input
                                                class="form-check-input"
                                                type="checkbox"
                                                id="auto-scroll"
                                                checked
                                            />
                                            <label
                                                class="form-check-label text-white-50 small"
                                                for="auto-scroll"
                                                >Auto-scroll</label
                                            >
                                        </div>
                                        <button
                                            class="btn btn-premium btn-sm micro-interaction"
                                            id="clear-log"
                                        >
                                            <i class="bi bi-trash"></i>
                                        </button>
                                        <button
                                            class="btn btn-premium btn-sm micro-interaction"
                                            id="export-log"
                                        >
                                            <i class="bi bi-download"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div class="activity-log-container">
                                    <div class="activity-log" id="activity-log">
                                        <div class="log-entry log-info">
                                            <div
                                                class="d-flex align-items-center"
                                            >
                                                <i
                                                    class="bi bi-info-circle me-2 text-info"
                                                ></i>
                                                <span
                                                    class="log-timestamp me-3 text-white-50 small"
                                                    >[--:--:--]</span
                                                >
                                                <span
                                                    >üõ°Ô∏è ExamGuardian Pro
                                                    initialized - Monitoring
                                                    services starting...</span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Premium Confirmation Modal -->
        <div
            class="modal fade"
            id="confirmModal"
            tabindex="-1"
            aria-labelledby="confirmModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog modal-lg modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <div class="d-flex align-items-center">
                            <div
                                class="me-3 p-3 rounded-circle"
                                style="background: var(--gradient-danger)"
                            >
                                <i
                                    class="bi bi-shield-exclamation fs-4 text-white"
                                ></i>
                            </div>
                            <div>
                                <h4
                                    class="modal-title text-white mb-0"
                                    id="confirmModalLabel"
                                >
                                    Security Action Required
                                </h4>
                                <small class="text-white-50"
                                    >Confirm exam environment protection</small
                                >
                            </div>
                        </div>
                        <button
                            type="button"
                            class="btn-close btn-close-white"
                            data-bs-dismiss="modal"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <div class="alert alert-warning border-0 mb-4">
                            <i class="bi bi-exclamation-triangle me-2"></i>
                            <strong>Important:</strong> This action will secure
                            your exam environment by removing potential threats.
                        </div>

                        <h5 class="text-white mb-3 fw-semibold">
                            Planned Security Actions:
                        </h5>
                        <ul
                            id="action-preview"
                            class="list-unstyled text-white-50 ps-3"
                        >
                            <!-- Dynamic content will be inserted here -->
                        </ul>

                        <div class="row mt-4">
                            <div class="col-md-6">
                                <div
                                    class="glass-card border-success p-3 text-center"
                                >
                                    <i
                                        class="bi bi-shield-check text-success fs-1 mb-3"
                                    ></i>
                                    <h6 class="text-success fw-semibold">
                                        Protected Items
                                    </h6>
                                    <p class="text-white-50 small mb-0">
                                        Your exam tab and essential processes
                                        will be preserved
                                    </p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div
                                    class="glass-card border-danger p-3 text-center"
                                >
                                    <i
                                        class="bi bi-x-octagon text-danger fs-1 mb-3"
                                    ></i>
                                    <h6 class="text-danger fw-semibold">
                                        Terminated Items
                                    </h6>
                                    <p
                                        class="text-white-50 small mb-0"
                                        id="threat-count-display"
                                    >
                                        AI applications and unauthorized tabs
                                        will be closed
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-premium"
                            data-bs-dismiss="modal"
                        >
                            <i class="bi bi-x-circle me-2"></i>Cancel Action
                        </button>
                        <button
                            type="button"
                            class="btn btn-emergency"
                            id="confirm-action"
                        >
                            <i class="bi bi-shield-check me-2"></i>Secure
                            Environment
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div
            class="modal fade"
            id="settingsModal"
            tabindex="-1"
            aria-labelledby="settingsModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <div>
                            <h4
                                class="modal-title text-white mb-0"
                                id="settingsModalLabel"
                            >
                                System Configuration
                            </h4>
                            <small class="text-white-50"
                                >Customize monitoring preferences</small
                            >
                        </div>
                        <button
                            type="button"
                            class="btn-close btn-close-white"
                            data-bs-dismiss="modal"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <div class="row g-4">
                            <div class="col-12">
                                <label class="form-label text-white fw-semibold"
                                    >Update Interval</label
                                >
                                <select
                                    class="form-select"
                                    id="update-interval"
                                >
                                    <option value="3">
                                        3 seconds (High Performance)
                                    </option>
                                    <option value="5" selected>
                                        5 seconds (Balanced)
                                    </option>
                                    <option value="10">
                                        10 seconds (Power Saving)
                                    </option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label class="form-label text-white fw-semibold"
                                    >Exam Domain Protection</label
                                >
                                <input
                                    type="text"
                                    class="form-control"
                                    id="exam-domain"
                                    placeholder="exam.university.edu"
                                />
                                <small class="form-text text-white-50"
                                    >Tabs from this domain will be automatically
                                    protected</small
                                >
                            </div>
                            <div class="col-12">
                                <div class="form-check form-switch">
                                    <input
                                        class="form-check-input"
                                        type="checkbox"
                                        id="audio-alerts"
                                        checked
                                    />
                                    <label
                                        class="form-check-label text-white fw-medium"
                                        for="audio-alerts"
                                    >
                                        Audio Alerts for Security Threats
                                    </label>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-check form-switch">
                                    <input
                                        class="form-check-input"
                                        type="checkbox"
                                        id="auto-terminate"
                                        checked
                                    />
                                    <label
                                        class="form-check-label text-white fw-medium"
                                        for="auto-terminate"
                                    >
                                        Auto-terminate new AI applications
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-premium"
                            data-bs-dismiss="modal"
                        >
                            Cancel
                        </button>
                        <button
                            type="button"
                            class="btn btn-success-premium"
                            id="save-settings"
                        >
                            <i class="bi bi-check-circle me-2"></i>Save
                            Configuration
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loading-overlay">
            <div class="loading-content">
                <div class="loading-spinner mb-4"></div>
                <h4 class="loading-text">Processing Security Action...</h4>
                <p class="loading-message" id="loading-message">
                    Securing your exam environment...
                </p>
            </div>
        </div>

        <!-- Audio Elements -->
        <audio id="alert-sound" preload="auto">
            <source
                src="data:audio/wav;base64,UklGRvIBAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoAAAABAAEAAgABAAMAAQAEAAEABQABAAYAAQAHAAEACAABAAkAAQAKAAEACwABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEA"
                type="audio/wav"
            />
        </audio>

        <!-- Bootstrap JS -->
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"
        ></script>

        <!-- Initialize AOS -->
        <script>
            AOS.init({
                duration: 800,
                easing: "ease-in-out-sine",
                once: true,
                offset: 50,
                disable: "mobile",
            });

            // Hide loading screen after DOM is loaded
            document.addEventListener("DOMContentLoaded", function () {
                const loadingScreen = document.getElementById("loading-screen");

                setTimeout(() => {
                    loadingScreen.classList.add("fade-out");
                    setTimeout(() => {
                        loadingScreen.style.display = "none";
                    }, 500);
                }, 2000);

                // Initialize tooltips
                const tooltipTriggerList = [].slice.call(
                    document.querySelectorAll('[data-bs-toggle="tooltip"]'),
                );
                tooltipTriggerList.map(function (tooltipTriggerEl) {
                    return new bootstrap.Tooltip(tooltipTriggerEl);
                });
            });
        </script>

        <!-- Custom Dashboard JavaScript -->
        <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>

        <!-- Demo Mode and Utilities -->
        <script>
            let demoModeEnabled = false;

            function toggleDemoMode() {
                const btn = document.getElementById("demo-mode-btn");

                if (!demoModeEnabled) {
                    // Enable demo mode
                    fetch("/api/demo-mode", { method: "POST" })
                        .then((response) => response.json())
                        .then((data) => {
                            if (data.success) {
                                demoModeEnabled = true;
                                btn.innerHTML =
                                    '<i class="bi bi-flask me-2"></i><span>Disable</span>';
                                btn.className = "btn btn-warning";

                                showPremiumAlert(
                                    "üß™ Demo mode enabled! Simulated threats and data now active.",
                                    "success",
                                );

                                setTimeout(() => {
                                    if (
                                        window.dashboard &&
                                        window.dashboard.requestUpdate
                                    ) {
                                        window.dashboard.requestUpdate();
                                    } else {
                                        location.reload();
                                    }
                                }, 1000);
                            }
                        })
                        .catch((error) => {
                            console.error("Demo mode error:", error);
                            showPremiumAlert(
                                "‚ùå Failed to enable demo mode",
                                "danger",
                            );
                        });
                } else {
                    // Disable demo mode
                    fetch("/api/disable-demo-mode", { method: "POST" })
                        .then((response) => response.json())
                        .then((data) => {
                            if (data.success) {
                                demoModeEnabled = false;
                                btn.innerHTML =
                                    '<i class="bi bi-flask me-2"></i><span>Demo</span>';
                                btn.className = "btn btn-premium";

                                showPremiumAlert(
                                    "‚úÖ Demo mode disabled",
                                    "info",
                                );

                                setTimeout(() => {
                                    if (
                                        window.dashboard &&
                                        window.dashboard.requestUpdate
                                    ) {
                                        window.dashboard.requestUpdate();
                                    } else {
                                        location.reload();
                                    }
                                }, 1000);
                            }
                        })
                        .catch((error) =>
                            console.error("Demo disable error:", error),
                        );
                }
            }

            function showPremiumAlert(message, type) {
                const alertContainer =
                    document.getElementById("alert-container");
                const alertDiv = document.createElement("div");
                alertDiv.className = `alert alert-${type}`;
                alertDiv.innerHTML = `
                    <div class="d-flex align-items-center">
                        <i class="bi bi-${type === "success" ? "check-circle" : type === "danger" ? "exclamation-triangle" : "info-circle"}-fill me-2"></i>
                        <div class="flex-grow-1">${message}</div>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert"></button>
                    </div>
                `;

                alertContainer.appendChild(alertDiv);

                // Auto-remove after 5 seconds
                setTimeout(() => {
                    if (alertDiv.parentNode) {
                        alertDiv.classList.add("fade");
                        setTimeout(() => alertDiv.remove(), 500);
                    }
                }, 5000);
            }

            // Performance optimizations
            if ("serviceWorker" in navigator) {
                window.addEventListener("load", function () {
                    navigator.serviceWorker
                        .register("/sw.js")
                        .then(function (registration) {
                            console.log("SW registered: ", registration);
                        })
                        .catch(function (registrationError) {
                            console.log(
                                "SW registration failed: ",
                                registrationError,
                            );
                        });
                });
            }

            // Prevent context menu on production
            if (
                window.location.hostname !== "localhost" &&
                window.location.hostname !== "127.0.0.1"
            ) {
                document.addEventListener("contextmenu", function (e) {
                    e.preventDefault();
                });
            }
        </script>
    </body>
</html>